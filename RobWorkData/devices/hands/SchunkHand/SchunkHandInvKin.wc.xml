<TreeDevice name="SchunkHand">

  <CollisionSetup file="CollisionSetup.xml" />

 <Define id="finger">

  <Joint name="Joint2" type="Revolute">
   <RPY> 0 0 90 </RPY> <Pos> 0 0 0</Pos></Joint>
  <Joint name="Joint3" type="Revolute">
   <RPY> 0 0 0 </RPY> <Pos> 0 0.086501 0</Pos></Joint>

  <Frame name="TCPOffset">
   <RPY> 0 -90 -10 </RPY> <Pos> -0.01 0.05 0</Pos></Frame>

  <!-- we define two prismatic joints to define the area of the endeffector-->
  <!--Joint name="EndEffX" type="Prismatic">
   <RPY> 0 90 0 </RPY> <Pos> 0 0 0</Pos></Joint>
  <Joint name="EndEffY" type="Prismatic">
   <RPY> 0 0 90 </RPY> <Pos> 0 0 0</Pos></Joint>
  <Joint name="EndEffRot" type="Revolute">
   <RPY> 0 -90 0 </RPY> <Pos> 0 0 0</Pos></Joint-->  

  <Joint name="EndEffRot" type="Revolute">
   <RPY> 0 0 0 </RPY> <Pos> 0 0 0</Pos></Joint>  
   
  <Frame name="TCP" type="EndEffector">
   <RPY> 0 0 0 </RPY> <Pos> 0 0 0</Pos></Frame>
  
   
   
  <!-- Define limits -->
  <!--PosLimit refjoint="EndEffX" min="-0.01" max="0.01" /-->
  <!--PosLimit refjoint="EndEffY" min="-0.03" max="0.03" /-->
  <PosLimit refjoint="EndEffRot" min="-360" max="360" />
  
  <!--VelLimit refjoint="EndEffX" max="0.005" />
  <VelLimit refjoint="EndEffY" max="0.01" /-->
  <VelLimit refjoint="EndEffRot" max="10" />

  <!--AccLimit refjoint="EndEffX" max="0.1" />
  <AccLimit refjoint="EndEffY" max="0.5" /-->
  <AccLimit refjoint="EndEffRot" max="100" />
  
  <PosLimit refjoint="Joint2" min="-90" max="90" />
  <PosLimit refjoint="Joint3" min="-90" max="90" />
  <VelLimit refjoint="Joint2" max="5" />
  <VelLimit refjoint="Joint3" max="5" />
  <AccLimit refjoint="Joint2" max="10" />
  <AccLimit refjoint="Joint3" max="10" />

  <!-- And geometry -->
  <Drawable name="Joint2Geo" refframe="Joint2" colmodel="Disabled">
   <RPY> 0 0 -90 </RPY> <Pos> -0.038105 -0.0417 0</Pos>
   <Polytope file="Geometry/FingerMid.3ds" />
  </Drawable>
  <CollisionModel name="Joint2Geo" refframe="Joint2">
   <RPY> 0 0 -90 </RPY> <Pos> -0.038105 -0.0417 0</Pos>
   <Polytope file="Geometry/FingerMidBounding" />
  </CollisionModel>


  <Drawable name="Joint3Geo" refframe="Joint3" colmodel="Disabled">
   <RPY> 0 0 -90 </RPY> <Pos> -0.038105 -0.128201 0</Pos>
   <Polytope file="Geometry/FingerTip.3ds" />
  </Drawable>
  <CollisionModel name="Joint3Geo" refframe="Joint3">
   <RPY> 0 0 -90 </RPY> <Pos> -0.038105 -0.128201 0</Pos>
   <Polytope file="Geometry/FingerTipBounding" />
  </CollisionModel>

    
 </Define>

 <Frame name="Base">
  <RPY> 0 0 0 </RPY> <Pos>0 0 0.065</Pos>
 </Frame>
 <Frame name="TCP">
  <RPY> 0 0 0 </RPY> <Pos>0 0 0.1</Pos>
 </Frame>
 
 <Frame name="f1" refframe="Base" ></Frame>
 <Frame name="F1Base">
  <RPY> 0 0 0 </RPY> <Pos>0.038105 0 0.0417</Pos></Frame>
 <SerialChain name="f1">
  <Use id="finger" />
 </SerialChain>

 <Frame name="f2" refframe="Base">
  <RPY> 120 0 0 </RPY> <Pos>0 0 0</Pos></Frame>
 <Frame name="F2Base">
  <RPY> 60 0 0 </RPY> <Pos>0.038105 0 0.0417</Pos></Frame>
 <Joint name="F2Joint1" type="Revolute">
  <RPY> 0 0 180 </RPY> <Pos> 0 0 0</Pos></Joint>
 <Frame name="F2Joint1Rev">
  <RPY> 0 0 -180 </RPY> <Pos>0 0 0</Pos></Frame>
  
 <PosLimit refjoint="F2Joint1" min="0" max="90" />
 <VelLimit refjoint="F2Joint1" max="2.8" />
 <AccLimit refjoint="F2Joint1" max="10" />
 <SerialChain name="f2">
  <Use id="finger" />
 </SerialChain>

 <Frame name="f3" refframe="Base">
  <RPY> -120 0 0 </RPY> <Pos>0 0 0</Pos></Frame>
 <Frame name="F3Base">
  <RPY> -60 0 0 </RPY> <Pos>0.038105 0 0.0417</Pos></Frame>
 <Joint name="F3Joint1" type="Revolute">
  <RPY> 0 0 180 </RPY> <Pos> 0 0 0</Pos>
  <Depend on="F2Joint1" gain="-1" offset="0" /></Joint>
 <Frame name="F3Joint1Rev">
  <RPY> 0 0 -180 </RPY> <Pos>0 0 0</Pos></Frame>
 <SerialChain name="f3">
  <Use id="finger" />
 </SerialChain>
 
 
 <!-- And know we add the geometry -->
 <Drawable name="BaseGeo" refframe="Base" colmodel="Disabled">
  <Polytope file="Geometry/Base.3ds" />
 </Drawable>
 <CollisionModel name="BaseGeo" refframe="Base">
  <Polytope file="Geometry/BaseBounding" />
 </CollisionModel>


 <Drawable name="F1BaseGeo" refframe="F1Base"  colmodel="Disabled">
  <RPY> 0 0 0 </RPY> <Pos> -0.038105 0 -0.0417</Pos>
  <Polytope file="Geometry/FingerBase.3ds" />
 </Drawable>
 <CollisionModel name="F1BaseGeo" refframe="F1Base">
  <RPY> 0 0 0 </RPY> <Pos> -0.038105 0 -0.0417</Pos>
  <Polytope file="Geometry/FingerBaseBounding" />
 </CollisionModel>

 
 <Drawable name="F2BaseGeo" refframe="F2Joint1Rev" colmodel="Disabled">
  <RPY> 0 0 0 </RPY> <Pos> -0.038105 0 -0.0417</Pos>
  <Polytope file="Geometry/FingerBase.3ds" />
 </Drawable>
 <CollisionModel name="F2BaseGeo" refframe="F2Joint1Rev">
  <RPY> 0 0 0 </RPY> <Pos> -0.038105 0 -0.0417</Pos>
  <Polytope file="Geometry/FingerBaseBounding" />
 </CollisionModel>

 
<Drawable name="F3BaseGeo" refframe="F3Joint1Rev" colmodel="Disabled">
  <RPY> 0 0 0 </RPY> <Pos> -0.038105 0 -0.0417</Pos>
  <Polytope file="Geometry/FingerBase.3ds" />
</Drawable>
<CollisionModel name="F3BaseGeo" refframe="F3Joint1Rev">
  <RPY> 0 0 0 </RPY> <Pos> -0.038105 0 -0.0417</Pos>
  <Polytope file="Geometry/FingerBaseBounding" />
</CollisionModel>
 
</TreeDevice>
